using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using static System.Net.Mime.MediaTypeNames;

namespace ConsoleGame
{
    internal class Program
    {
        static void Main(string[] args) {

            Random random = new Random();
            int healthKnight;
            int armorKnight;
            int damageMonster;
            int diceMonster;
            int hitsAlive;
            int healthMonster;
            int armorMonster;
            int diceKnight;
            int damageKnight;
            int healthPotions = 3;
            int healthRestore = 1;
            string nameKnight;
            int action;
            healthMonster = 20;
            armorMonster = 10;
            healthKnight = 15;
            armorKnight = 12;
            hitsAlive = 0;
            string helloPlayer = "Добро пожаловать, дорогой Рыцарь!\nСегодня тебя ждёт очередное приключение.\nБлагодарю, что решил в нём принять участие!\nОзвучу правила:\n1) Вероятность попадания определяет кубик;\n2) Вы решаете, как действовать.\nВаши стартовые характеристики:\n" +
                "Здоровье: 15 очкам здоровья;\n" +
                "Броня: 12 очков брони;\n" +
                "Зелья здоровья: 3 единицы.";
            foreach (char c in helloPlayer) {
                Console.Write(c);
                Thread.Sleep(100); 
            }
            Console.WriteLine();
            Console.WriteLine();
            string startMonster = "Путешествуя по бескрайним полям и лугам королевства, Вы - мой благородный Рыцарь, столкнулись с монстром\nПохоже, что сражения не избежать!\nКаковы будут ваши действия?";
            foreach (char c in startMonster) {
                Console.Write(c);
                Thread.Sleep(100);
            }
            while (healthKnight > 0 & healthMonster > 0) {
                Console.WriteLine();
                Console.WriteLine();
                Console.WriteLine("1. Атака");
                Console.WriteLine("2. Уклонение");
                Console.WriteLine("3. Зелье здоровья");
                Console.WriteLine("4. Побег");


                Console.Write("Каковы наши действия? Введи число: ");
                Console.WriteLine(); Console.WriteLine();

                action = Convert.ToInt32(Console.ReadLine());
                switch (action) {
                        case (1):
                            diceKnight = random.Next(1, 20);
                            if (diceKnight == 1) {
                                Console.WriteLine("Рыцарь промахнулся!");

                            }
                            else if (diceKnight == 20) {
                                damageKnight = (random.Next(1, 8) * 2);
                                healthMonster -= damageKnight;
                                Console.WriteLine($"Рыцарь наносит критический удар! Урон: {damageKnight}!");
                                Console.WriteLine($"У монстра осталось {healthMonster} здоровья.");
                            }
                            else {
                                Console.WriteLine($"Рыцарь атакует и на его кубике выпадает {diceKnight}!");
                                if (diceKnight > armorMonster) {
                                    damageKnight = random.Next(1, 8);
                                    healthMonster -= damageKnight;
                                    Console.WriteLine($"Рыцарь пробил шкуру зверя и нанёс {damageKnight} урона!! У рыцаря осталось {healthMonster} очков здоровья!");
                                }
                                else {
                                    Console.WriteLine("Рыцарь промахнулся!");
                                }
                            }
                            Console.WriteLine();
                            Console.WriteLine("Монстр атакует!");
                            diceMonster = random.Next(1, 20);
                            if (diceMonster == 1) {
                                Console.WriteLine("Монстр промахнулся!");

                            }
                            else if (diceMonster == 20) {
                                damageMonster = (random.Next(1, 8) * 2);
                                healthKnight -= damageMonster;
                                Console.WriteLine($"Монстр наносит критический удар! Рыцарь теряет {damageMonster} очков здоровья!");
                                Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                            }
                            else {
                                Console.WriteLine($"Монстр атакует и на его кубике выпадает {diceMonster}!");
                                if (diceMonster > armorKnight) {
                                    damageMonster = random.Next(1, 8);
                                    healthKnight -= damageMonster;
                                    Console.WriteLine($"Монстр попал по Рыцарю! Рыцарь теряет {damageMonster} очков здоровья!");
                                    Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                                }
                                else {
                                    Console.WriteLine("Монстр промахнулся!");

                                }
                            }
                        Console.WriteLine();
                        break;
                        case (2):
                            Console.WriteLine("Рыцарь пытается уклониться");
                            Console.WriteLine("Ваш класс брони увеличивается на 5 очков на 1 ход!");
                            armorKnight += 5;
                            Console.WriteLine();
                            Console.WriteLine("Монстр атакует!");
                            diceMonster = random.Next(1, 20);
                            if (diceMonster == 1) {
                                Console.WriteLine("Монстр промахнулся!");

                            }
                            else if (diceMonster == 20) {
                                damageMonster = (random.Next(1, 8) * 2);
                                healthKnight -= damageMonster;
                                Console.WriteLine($"Монстр наносит критический удар! Рыцарь теряет {damageMonster} очков здоровья!");
                                Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                            }
                            else {
                                Console.WriteLine($"Монстр атакует и на его кубике выпадает {diceMonster}!");
                                if (diceMonster > armorKnight) {
                                    damageMonster = random.Next(1, 8);
                                    healthKnight -= damageMonster;
                                    Console.WriteLine($"Монстр попал по Рыцарю! Рыцарь теряет {damageMonster} очков здоровья!");
                                    Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                                }
                                else {
                                    Console.WriteLine("Монстр промахнулся!");

                                }
                            }
                            armorKnight -= 5;
                        Console.WriteLine();
                        break;
                        case (3):
                            Console.WriteLine("Время выпить зелье здоровья!");
                            if (healthPotions > 0) {
                                healthRestore = random.Next(1, 5);
                                healthKnight += healthRestore;
                                healthPotions -= 1;
                            Console.WriteLine($"Рыцарь восстановил себе {healthRestore} очков здоровья. Отлично!");
                            }
                            else 
                            {
                                Console.WriteLine("Зелий больше нет. Печально...");
                            }
                            Console.WriteLine();
                            Console.WriteLine("Монстр атакует!");
                            diceMonster = random.Next(1, 20);
                            if (diceMonster == 1) {
                                Console.WriteLine("Монстр промахнулся!");

                            }
                            else if (diceMonster == 20) {
                                damageMonster = (random.Next(1, 8) * 2);
                                healthKnight -= damageMonster;
                                Console.WriteLine($"Монстрн наносит критический удар! Рыцарь теряет {damageMonster} очков здоровья!");
                                Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                            }
                            else {
                                Console.WriteLine($"Монстр атакует и на его кубике выпадает {diceMonster}!");
                                if (diceMonster > armorKnight) {
                                    damageMonster = random.Next(1, 8);
                                    healthKnight -= damageMonster;
                                    Console.WriteLine($"Монстр попал по Рыцарю! Рыцарь теряет {damageMonster} очков здоровья!");
                                    Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                                }
                                else {
                                    Console.WriteLine("Монстр промахнулся!");

                                }
                            }
                        Console.WriteLine();
                        break;
                        case (4):
                            Console.WriteLine("Рыцарь пытается убежать...");
                            Thread.Sleep(3000);
                            Console.WriteLine("Но бежать некуда...");
                            Thread.Sleep(3000);
                            Console.WriteLine();
                            Console.WriteLine("Монстр атакует!");
                            diceMonster = random.Next(1, 20);
                            if (diceMonster == 1) {
                                Console.WriteLine("Монстр промахнулся!");

                            }
                            else if (diceMonster == 20) {
                                damageMonster = (random.Next(1, 8) * 2);
                                healthKnight -= damageMonster;
                                Console.WriteLine($"Монстр наносит критический удар! Рыцарь теряет {damageMonster} очков здоровья!");
                                Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                            }
                            else {
                                Console.WriteLine($"Монстр атакует и на его кубике выпадает {diceMonster}!");
                                if (diceMonster > armorKnight) {
                                    damageMonster = random.Next(1, 8);
                                    healthKnight -= damageMonster;
                                    Console.WriteLine($"Монстр попал по Рыцарю! Рыцарь теряет {damageMonster} очков здоровья!");
                                    Console.WriteLine($"Здоровье Рыцаря: {healthKnight} очков здоровья.");

                                }
                                else {
                                    Console.WriteLine("Монстр промахнулся!");

                                }
                            }
                        Console.WriteLine();
                        break;
                    }
                }



            Console.WriteLine();
            if (healthKnight <= 0) {
                Console.WriteLine();
                Console.WriteLine("Рыцарь проиграл. Покойся с миром!");
            }
            else if (healthMonster <= 0)
                {
                Console.WriteLine();
                Console.WriteLine("Рыцарь победил. УРА!");
            }
            Thread.Sleep(3000);
        }
    }
}


